<title>Elematter</title><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=0,minimal-ui"><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><style>*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;transition-duration:500ms;transition-property:none}body{background:#111;background:-webkit-radial-gradient(#282828,#060606);font-family:sans-serif;overflow:hidden;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.g{box-shadow:0 0 0 20px rgba(0,0,0,.5);left:50%;position:absolute;top:50%}.s{bottom:0;left:0;position:absolute;right:0;top:0}.tile{background:hsla(0,0%,100%,.05);left:0;position:absolute;top:0;transition-property:background}.tile:hover{background:#666;background:hsla(0,0%,100%,.2);cursor:crosshair;transition-duration:0}.tile.path{background:#111;box-shadow:0 -6px 0 #000}.tile.path:hover{background:#311;cursor:not-allowed}.row{background:#000;height:40px;left:0;position:absolute;width:100%;z-index:100}.top-row{top:0}.bot-row{bottom:0;padding-top:1px}.b{background:#333;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.15);color:hsla(0,0%,100%,.6);cursor:pointer;display:block;float:left;font-size:13px;height:39px;line-height:37px;margin:0 1px 0 0;position:relative;text-align:center;text-shadow:0 1px 1px #000;transition-property:background,box-shadow,color}.b:before{background:-webkit-linear-gradient(transparent,hsla(0,0%,100%,.075));content:'';height:50%;left:0;position:absolute;top:0;width:100%}.b:hover{background:#444;color:#fff;transition-duration:0}.s1{width:39px}.s2{width:79px}.s3{width:119px}.s3:last-child{width:120px;margin-right:0}.s4{width:159px}.s4:last-child{width:160px;margin-right:0}.b i{display:inline-block;font-size:16px;font-style:normal;margin-right:3px}.playing .b-play{background:#222;box-shadow:inset 0 0 0 1px #333,inset 0 0 10px hsla(0,0%,0%,.75);color:#fff}.playing .b-play:hover{background:#333}.x1 .b-x1,.x1 .b-x1:hover,.x2 .b-x2,.x2 .b-x2:hover,.x3 .b-x3,.x3 .b-x3:hover{background:#222;box-shadow:inset 0 0 0 1px #333,inset 0 0 10px hsla(0,0%,0%,.75);color:#fff;cursor:default}.b-e{background:#234223;color:#51e051}.b-e:hover{background:#2d6b2d;color:#9ef99e}.b-w{background:#233842;color:#51b0e0}.b-w:hover{background:#2d566b;color:#9edbf9}.b-a{background:#424223;color:#e0e051}.b-a:hover{background:#6b6b2d;color:#f9f99e}.b-f{background:#422323;color:#e05151}.b-f:hover{background:#6b2d2d;color:#f99e9e}.muted .b-mute{background:#222;box-shadow:inset 0 0 0 1px #333,inset 0 0 10px hsla(0,0%,0%,.75);color:#fff}.muted .b-mute:hover{background:#333}.d,.l{background:#090909;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.05);color:hsla(0,0%,100%,.6);display:block;float:left;font-size:13px;height:39px;line-height:37px;margin:0 1px 0 0;position:relative;text-align:center;text-shadow:0 1px 1px #000;transition-property:background,box-shadow,color}.d:before,.l:before{background:-webkit-linear-gradient(transparent,hsla(0,0%,100%,.075));content:'';height:50%;left:0;position:absolute;top:0;width:100%}.d i,.l i{font-size:16px;font-style:normal}.l{background:#111}.w{margin:0 2px}.w-e{color:#3df43d}.w-w{color:#3db7f4}.w-a{color:#f4f43d}.w-f{color:#f43d3d}.build-menu-wrap{background:hsla(0,0%,0%,.5);bottom:0;cursor:not-allowed;left:0;opacity:0;position:absolute;right:0;top:0;transition:visibility 300ms 300ms,opacity 300ms;visibility:hidden;z-index:200}.build-menu-open .build-menu-wrap{opacity:1;transition-delay:0;visibility:visible}.build-menu{cursor:default;left:0;position:absolute;top:0;width:280px}.build-selects{background:hsla(0,0%,0%,.5);height:80px;width:100%}.build-select{background:#fff;height:40px;position:absolute;top:20px;width:40px}.build-d{background:#fff}.build-e{background:#3df43d}.build-w{background:#3db7f4}.build-a{background:#f4f43d}.build-f{background:#f43d3d}.pos-w .build-d{left:20px}.pos-w .build-e{left:70px}.pos-w .build-w{left:120px}.pos-w .build-a{left:170px}.pos-e .build-d,.pos-w .build-f{left:220px}.pos-e .build-e{left:20px}.pos-e .build-w{left:70px}.pos-e .build-a{left:120px}.pos-e .build-f{left:170px}.build-info{background:hsla(0,0%,20%,.5);border:1px solid hsla(0,0%,100%,.2);font-size:13px;left:0;line-height:1.7;padding:15px 20px;position:absolute;width:100%}.pos-n .build-info{top:80px}.pos-s .build-info{bottom:80px}.build-title{font-size:16px;font-weight:700}.build-type{color:#3df43d}.build-divider{color:#666;font-weight:400;margin:0 8px}.build-cost{color:#fff}.build-desc{color:#fff;font-style:italic}.build-stat{color:#aaa}</style><div class="g x1"><div class="s s-play"><div class="row top-row"><a class="b b-play s3"><i>&rtrif;</i>Play</a> <a class="b b-x1 s1 selected">&times;1</a> <a class="b b-x2 s1">&times;2</a> <a class="b b-x3 s1">&times;3</a> <a class="b b-e s2 atk" title="Destroy all Earth enemies"><i>&otimes;</i>Earth</a> <a class="b b-w s2 atk" title="Destroy all Water enemies"><i>&otimes;</i>Water</a> <a class="b b-a s2 atk" title="Destroy all Air enemies"><i>&otimes;</i>Air</a> <a class="b b-f s2 atk" title="Destroy all Fire enemies"><i>&otimes;</i>Fire</a> <a class="b b-mute s3"><i>&sung;</i>Mute</a> <a class="b b-menu s3"><i>&equiv;</i>Menu</a></div><div class="row bot-row"><div class="l s1"><i>&hearts;</i></div><div class="d d-lives s2">13 / 13</div><div class="l s1"><i>&there4;</i></div><div class="d d-resources s2">1,000</div><div class="l s2">Wave</div><div class="d d-wave s2">1 / 20</div><div class="l s2">Next</div><div class="d d-next s4"><span class="w w-e">&times;10</span> <span class="w w-w">&times;10</span> <span class="w w-a">&times;10</span> <span class="w w-f">&times;10</span></div><a class="b b-send s4"><i>&raquo;</i>Send Next +$300</a></div><div class=build-menu-wrap><div class=build-menu><div class=build-selects><a class="build-select build-d"></a> <a class="build-select build-e"></a> <a class="build-select build-w"></a> <a class="build-select build-a"></a> <a class="build-select build-f"></a></div><div class=build-info><div class=build-title><span class=build-type></span> <span class=build-divider>|</span> <span class=build-cost></span></div><div class=build-desc></div><div class=build-stat><strong>Damage:</strong> <span class=build-damage></span></div><div class=build-stat><strong>Range:</strong> <span class=build-range></span></div><div class=build-stat><strong>Rate:</strong> <span class=build-rate></span></div></div></div></div></div></div><script>function SfxrParams(){this.setSettings=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(.18>i){var a=.18/i;this.b*=a,this.c*=a,this.e*=a}}}function SfxrSynth(){this._params=new SfxrParams;var t,e,i,a,s,n,o,r,g,h,l,c;this.reset=function(){var t=this._params;a=100/(t.f*t.f+.001),s=100/(t.g*t.g+.001),n=1-t.h*t.h*t.h*.01,o=-t.i*t.i*t.i*1e-6,t.a||(l=.5-t.n/2,c=5e-5*-t.o),r=1+t.l*t.l*(t.l>0?-.9:10),g=0,h=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var a=this._params;return t=a.b*a.b*1e5,e=a.c*a.c*1e5,i=a.e*a.e*1e5+12,3*((t+e+i)/3|0)},this.synthWave=function(d,u){var p=this._params,m=1!=p.s||p.v,f=p.v*p.v*.1,y=1+3e-4*p.w,w=p.s*p.s*p.s*.1,S=1+1e-4*p.t,v=1!=p.s,b=p.x*p.x,M=p.g,x=p.q||p.r,P=p.r*p.r*p.r*.2,k=p.q*p.q*(p.q<0?-1020:1020),q=p.p?((1-p.p)*(1-p.p)*2e4|0)+32:0,T=p.d,z=p.j/2,C=p.k*p.k*.01,L=p.a,j=t,_=1/t,O=1/e,E=1/i,W=5/(1+p.u*p.u*20)*(.01+w);W>.8&&(W=.8),W=1-W;for(var A,B,G,I,H,D,R=!1,F=0,N=0,U=0,J=0,X=0,Y=0,$=0,K=0,Q=0,V=0,Z=new Array(1024),te=new Array(32),ee=Z.length;ee--;)Z[ee]=0;for(var ee=te.length;ee--;)te[ee]=2*Math.random()-1;for(var ee=0;u>ee;ee++){if(R)return ee;if(q&&++Q>=q&&(Q=0,this.reset()),h&&++g>=h&&(h=0,a*=r),n+=o,a*=n,a>s&&(a=s,M>0&&(R=!0)),B=a,z>0&&(V+=C,B*=1+Math.sin(V)*z),B|=0,8>B&&(B=8),L||(l+=c,0>l?l=0:l>.5&&(l=.5)),++N>j)switch(N=0,++F){case 1:j=e;break;case 2:j=i}switch(F){case 0:U=N*_;break;case 1:U=1+2*(1-N*O)*T;break;case 2:U=1-N*E;break;case 3:U=0,R=!0}x&&(k+=P,G=0|k,0>G?G=-G:G>1023&&(G=1023)),m&&y&&(f*=y,1e-5>f?f=1e-5:f>.1&&(f=.1)),D=0;for(var ie=8;ie--;){if($++,$>=B&&($%=B,3==L))for(var ae=te.length;ae--;)te[ae]=2*Math.random()-1;switch(L){case 0:H=l>$/B?.5:-.5;break;case 1:H=1-$/B*2;break;case 2:I=$/B,I=6.28318531*(I>.5?I-1:I),H=1.27323954*I+.405284735*I*I*(0>I?1:-1),H=.225*((0>H?-1:1)*H*H-H)+H;break;case 3:H=te[Math.abs(32*$/B|0)]}m&&(A=Y,w*=S,0>w?w=0:w>.1&&(w=.1),v?(X+=(H-Y)*w,X*=W):(Y=H,X=0),Y+=X,J+=Y-A,J*=1-f,H=J),x&&(Z[K%1024]=H,H+=Z[(K-G+1024)%1024],K++),D+=H}D*=.125*U*b,d[ee]=D>=1?32767:-1>=D?-32768:32767*D|0}return u}}var synth=new SfxrSynth;window.jsfxr=function(t){synth._params.setSettings(t);var e=synth.totalReset(),i=new Uint8Array(4*((e+1)/2|0)+44),a=2*synth.synthWave(new Uint16Array(i.buffer,44),e),s=new Uint32Array(i.buffer,0,44);s[0]=1179011410,s[1]=a+36,s[2]=1163280727,s[3]=544501094,s[4]=16,s[5]=65537,s[6]=44100,s[7]=88200,s[8]=1048578,s[9]=1635017060,s[10]=a,a+=44;for(var n=0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="data:audio/wav;base64,";a>n;n+=3){var g=i[n]<<16|i[n+1]<<8|i[n+2];r+=o[g>>18]+o[g>>12&63]+o[g>>6&63]+o[63&g]}return r},g={},g.data={},g.Group=function(){this.collection=[],this.length=0},g.Group.prototype.add=function(t){this.collection.push(t),this.length++},g.Group.prototype.remove=function(t){t<this.length&&(this.collection.splice(t,1),this.length--)},g.Group.prototype.empty=function(){this.collection.length=0,this.length=0},g.Group.prototype.each=function(t,e){var i,a=this.length;if(e)for(i=0;a>i;i++)this.collection[i][t](i);else for(i=a;i--;)this.collection[i][t](i)},g.Pool=function(t,e){this.base=t,this.preallocateAmount=e||0,this.alive=[],this.dead=[],this.length=0,this.deadLength=0,this.preallocateAmount&&this.preallocate()},g.Pool.prototype.preallocate=function(){for(var t=0;t<this.preallocateAmount;t++)this.dead.push(new this.base),this.deadLength++},g.Pool.prototype.create=function(t){if(this.deadLength){var e=this.dead.pop();e.init(t),this.alive.push(e),this.deadLength--,this.length++}else this.alive.push(new this.base(t)),this.length++},g.Pool.prototype.release=function(t){var e=this.alive.indexOf(t);e>-1&&(this.dead.push(this.alive.splice(e,1)[0]),this.length--,this.deadLength++)},g.Pool.prototype.empty=function(){this.alive.length=0,this.dead.length=0,this.length=0,this.deadLength=0},g.Pool.prototype.each=function(t,e){var i;if(e)for(i=0;i<this.length;i++)this.alive[i][t](i);else for(i=this.length;i--;)this.alive[i][t](i)},g.roundToNearest=function(t,e){return Math.round(t/e)*e},g.rand=function(t,e){return Math.random()*(e-t)+t},g.randInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},g.qS=function(t){return document.querySelector(t)},g.html=function(t,e){t.innerHTML=e},g.getPrefix=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return"-"+e+"-"},g.css=function(t,e,i,a){e=a?g.prefix+e:e,t.style[e]=i},g.hasClass=function(t,e){return t.classList.contains(e)},g.addClass=function(t,e){-1!=e.indexOf(" ")?(classes=e.split(" "),classes.forEach(function(e){g.addClass(t,e)})):t.classList.add(e)},g.removeClass=function(t,e){-1!=e.indexOf(" ")?(classes=e.split(" "),classes.forEach(function(e){g.removeClass(t,e)})):t.classList.remove(e)},g.toggleClass=function(t,e){t.classList.toggle(e)},g.rangeIntersect=function(t,e,i,a){return Math.max(t,e)>Math.min(i,a)&&Math.min(t,e)<Math.max(i,a)},g.rectIntersect=function(t,e){return g.util.rangeIntersect(t.x,t.x+t.width,e.x,e.x+e.width)&&g.util.rangeIntersect(t.y,t.y+t.height,e.y,e.y+e.height)},g.formatPad=function(t,e){return t+="",t.length<e?(t="0"+t,g.util.format.pad(t,e)):t},g.formatTime=function(t){var e=Math.floor(t/60);return t=Math.floor(t%60),g.util.format.pad(e,2)+":"+g.util.format.pad(t,2)},g.formatCommas=function(t){t+="";for(var e=t.split("."),i=e[0],a=e.length>1?"."+e[1]:"",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1,$2");return i+a},g.isset=function(t){return"undefined"!=typeof t},g.objIsEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},g.merge=function(t,e){for(var i in e)t[i]=e[i]},g.states={},g.addState=function(t,e){g.states[t]=new g.State(e)},g.setState=function(t){g.state&&(g.prevState=g.currentState(),g.states[g.state]._exit()),g.state=t,g.states[g.state]._init()},g.currentState=function(){return g.states[g.state]},g.State=function(t){g.merge(this,t),this.init=g.isset(this.init)?this.init:function(){},this.step=g.isset(this.step)?this.step:function(){},this.draw=g.isset(this.draw)?this.draw:function(){},this.exit=g.isset(this.exit)?this.exit:function(){}},g.State.prototype._init=function(){this.time=new g.Time,this.init()},g.State.prototype._step=function(){this.time._step(),this.step()},g.State.prototype._draw=function(){this.draw()},g.State.prototype._exit=function(){this.exit()},g.Time=function(){this._init()},g.Time.prototype._init=function(){this.now=Date.now(),this.last=Date.now(),this.delta=16,this.ndelta=1,this.elapsed=0,this.nelapsed=0,this.tick=0},g.Time.prototype._step=function(){this.now=Date.now(),this.delta=this.now-this.last,this.ndelta=Math.min(Math.max(this.delta/(1e3/60),1e-4),10),this.elapsed+=this.delta,this.nelapsed+=this.ndelta,this.last=this.now,this.tick++},Storage.prototype.setObject=function(t,e){this.setItem(t,JSON.stringify(e))},Storage.prototype.getObject=function(t){var e=this.getItem(t);return e&&JSON.parse(e)},Storage.prototype.removeObject=function(t){this.removeItem(t)},g.Storage=function(t){this.namespace=t,this.obj=localStorage.getObject(this.namespace)||{}},g.Storage.prototype.get=function(t){return this.obj[t]},g.Storage.prototype.set=function(t,e){this.obj[t]=e,this.sync()},g.Storage.prototype.sync=function(){localStorage.setObject(this.namespace,this.obj)},g.Storage.reset=function(){this.obj={},this.sync()},g.data.attacks={e:{description:"Earthquake"},w:{description:"Ice Blast"},a:{description:""},f:{description:"Heat Wave"}},g.data.map=[[-1,2],[8,2],[8,3],[10,3],[10,2],[12,2],[12,1],[14,1],[14,2],[18,2],[18,5],[14,5],[14,6],[10,6],[10,5],[7,5],[7,8],[11,8],[11,10],[13,10],[13,8],[17,8],[17,10],[19,10],[19,12],[13,12],[13,13],[8,13],[8,10],[5,10],[5,4],[1,4],[1,6],[3,6],[3,8],[0,8],[0,10],[1,10],[1,12],[6,12],[6,14]],g.data.towers={e:{type:"e",counters:"a",title:"Earth",description:{main:"Well Rounded",damage:"Medium +50% vs Air",range:"Medium",rate:"Medium"},hue:120,stats:[{cost:100,damage:10,range:50,rate:30},{cost:125,damage:12,range:60,rate:28},{cost:175,damage:14,range:70,rate:26}]},w:{type:"w",counters:"f",title:"Water",description:{main:"Slows Enemies",damage:"Medium +50% vs Fire",range:"Low",rate:"High"},hue:200,stats:[{cost:100,damage:10,range:50,rate:30},{cost:125,damage:12,range:60,rate:28},{cost:175,damage:14,range:70,rate:26}]},a:{type:"a",counters:"w",title:"Air",description:{main:"",damage:"Low +50% vs Water",range:"High",rate:"Medium"},hue:60,stats:[{cost:100,damage:10,range:50,rate:30},{cost:125,damage:12,range:60,rate:28},{cost:175,damage:14,range:70,rate:26}]},f:{type:"f",counters:"e",title:"Fire",description:{main:"Splash Damage",damage:"High +50% vs Earth",range:"Low",rate:"Medium"},hue:0,stats:[{cost:100,damage:10,range:50,rate:30},{cost:125,damage:12,range:60,rate:28},{cost:175,damage:14,range:70,rate:26}]}},g.Tile=function(t){g.merge(this,t),this.init()},g.Tile.prototype.init=function(){this.elem=document.createElement("div"),this.elem.className="tile "+this.classes.join(" "),g.css(this.elem,"transform","translate("+this.col*g.size+"px , "+this.row*g.size+"px )"),g.css(this.elem,"width",g.size+"px"),g.css(this.elem,"height",g.size+"px"),g.css(this.elem,"z-index",g.rows-this.row),this.state.dom.state.appendChild(this.elem),this.elem.addEventListener("click",this.onclick.bind(this))},g.Tile.prototype.step=function(){},g.Tile.prototype.draw=function(){},g.Tile.prototype.onclick=function(){this.state.isBuildMenuOpen||this.isPath||this.state.showBuildMenu(this)};var StateMenu=function(){};StateMenu.prototype.init=function(){},StateMenu.prototype.step=function(){},StateMenu.prototype.draw=function(){},StateMenu.prototype.exit=function(){},g.addState("menu",new StateMenu);var StatePlay=function(){};StatePlay.prototype.init=function(){this.isBuildMenuOpen=0,this.dom={},this.dom.state=g.qS(".s-play"),this.dom.buildMenuWrap=g.qS(".build-menu-wrap"),this.dom.buildMenu=g.qS(".build-menu"),this.dom.buildDefault=g.qS(".build-d"),this.dom.buildEarth=g.qS(".build-e"),this.dom.buildWater=g.qS(".build-w"),this.dom.buildAir=g.qS(".build-a"),this.dom.buildFire=g.qS(".build-f"),this.dom.buildTitle=g.qS(".build-title"),this.dom.buildType=g.qS(".build-type"),this.dom.buildCost=g.qS(".build-cost"),this.dom.buildDamage=g.qS(".build-damage"),this.dom.buildRange=g.qS(".build-range"),this.dom.buildRate=g.qS(".build-rate"),this.dom.buildMenuWrap.addEventListener("click",this.onBuildMenuWrapClick.bind(this)),this.dom.buildMenu.addEventListener("click",this.onBuildMenuClick.bind(this)),this.createTiles()},StatePlay.prototype.step=function(){},StatePlay.prototype.draw=function(){},StatePlay.prototype.exit=function(){},StatePlay.prototype.createTiles=function(){this.baseTiles=[],this.pathTiles=[];for(var t=0;t<g.cols;t++)for(var e=0;e<g.rows;e++){var i=this.isPath(t,e),a=new g.Tile({state:this,col:t,row:e,isPath:i||0,classes:i?["path"]:[],horizontal:t>g.cols/2?"e":"w",vertical:e>g.rows/2?"s":"n"});i?this.pathTiles.push(a):this.baseTiles.push(a)}},StatePlay.prototype.isPath=function(t,e){for(var i=g.data.map.length,a=0;i-1>a;a++){var s=g.data.map[a],n=g.data.map[a+1],o=Math.min(s[0],n[0]),r=Math.min(s[1],n[1]),h=Math.max(s[0],n[0]),l=Math.max(s[1],n[1]);if(t>=o&&h>=t&&e>=r&&l>=e)return 1}},StatePlay.prototype.showBuildMenu=function(t){console.log(t),this.isBuildMenuOpen=1,g.addClass(g.dom,"build-menu-open"),g.removeClass(g.dom,"pos-n pos-e pos-s pos-w"),g.addClass(g.dom,"pos-"+t.horizontal+" pos-"+t.vertical);var e=t.col*g.size-20,i=t.row*g.size-20;"e"==t.horizontal&&(e-=200),"s"==t.vertical,g.css(this.dom.buildMenu,"transform","translateX("+e+"px) translateY("+i+"px)",1)},StatePlay.prototype.hideBuildMenu=function(){this.isBuildMenuOpen=0,g.removeClass(g.dom,"build-menu-open")},StatePlay.prototype.onBuildMenuWrapClick=function(){this.hideBuildMenu()},StatePlay.prototype.onBuildMenuClick=function(t){t.stopPropagation()},g.addState("play",new StatePlay);var StateGameover=function(){};StateGameover.prototype.init=function(){},StateGameover.prototype.step=function(){},StateGameover.prototype.draw=function(){},StateGameover.prototype.exit=function(){},g.addState("gameover",new StateGameover),g.config={namespace:"elematter",width:800,height:600,size:40,state:"play"},g.init=function(){g.time=new g.Time,g.prefix=g.getPrefix(),g.size=g.config.size,g.width=g.config.width,g.height=g.config.height,g.ratio=g.height/g.width,g.cols=g.width/g.size,g.rows=g.height/g.size,g.scale=1,g.dom=g.qS(".g"),g.css(g.dom,"width",g.width+"px"),g.css(g.dom,"height",g.height+"px"),g.storage=new g.Storage(g.config.namespace),g.objIsEmpty(g.storage.obj),g.lastState=null,g.setState(g.config.state),g.step(),window.addEventListener("resize",g.onresize),g.onresize()},g.step=function(){requestAnimationFrame(g.step),g.time._step(),g.states[g.state]._step(),g.states[g.state]._draw()},g.onresize=function(){g.winWidth=window.innerWidth,g.winHeight=window.innerHeight,g.winRatio=g.winHeight/g.winWidth,g.css(g.dom,"transform","scale("+g.scale+")",1),g.css(g.dom,"margin-left",-g.width/2+"px"),g.css(g.dom,"margin-top",-g.height/2+"px")},g.init();</script>